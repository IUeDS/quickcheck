<table class="table table-condensed table-striped qc-attempts-table">
    <thead>
        <th ng-if="!vm.isStudent">Name</th>
        <th>Last Milestone</th>
        <th class="success text-center">Correct</th>
        <th class="danger text-center">Incorrect</th>
        <th>Score</th>
        <th class="text-center">Complete</th>
        <th class="text-center">Past Due</th>
        <th>Start Time</th>
        <th>Elapsed Time</th>
        <th ng-if="vm.showResponses">Responses</th>
        <th ng-if="!vm.isStudent && !vm.largeClassSize">Grade</th>
    </thead>
    <tbody infinite-scroll='vm.loadMoreAttempts()'>
        <tr ng-repeat="attempt in vm.attempts | limitTo: vm.numAttemptsDisplayed track by $index"
            ng-class="{'qc-no-top-border': !attempt.firstRowForStudent}">
            <td class="qc-attempt-name" ng-if="!vm.isStudent">
                <span ng-if="attempt.firstRowForStudent">{{ attempt.student.lis_person_name_family }}, {{ attempt.student.lis_person_name_given }}</span>
            </td>
            <td>{{ attempt.last_milestone }}</td>
            <td class="success text-center qc-attempt-count-correct">{{ vm.getCountCorrect(attempt) }}</td>
            <td class="danger text-center qc-attempt-count-incorrect">{{ vm.getCountIncorrect(attempt) }}</td>
            <td class="qc-attempt-calculated-score">{{ vm.getCalculatedScore(attempt) | number : 0 }}%</td>
            <td class="text-center qc-attempt-complete">
                <span ng-if="attempt.complete == 1">
                    <span class="fa fa-check qc-attempt-completed" aria-hidden="true"></span>
                    <span class="sr-only">Complete</span></span>
            </td>
            <td class="text-center qc-attempt-late-cell">
                <span ng-if="attempt.isLate">
                    <span class="fa fa-clock-o qc-attempt-late" aria-hidden="true"></span>
                    <span class="sr-only">Late Submission</span>
                </span>
            </td>
            <td>{{ vm.utils.formatTimeWithTimeZone(attempt.created_at, vm.courseContext.time_zone) }}</td>
            <td class="qc-attempt-elapsed-time">{{ vm.dateDiff(attempt.created_at, attempt.updated_at) }}</td>
            <td ng-if="vm.showResponses">
                <a class="btn btn-primary btn-xs qc-btn qc-btn-view-responses" role="button" type="button" ng-click="vm.viewResponses(attempt)" ng-if="vm.responsesAvailable(attempt)">
                    View Responses
                    <span class="sr-only">for <span ng-if="!vm.isStudent">{{ attempt.student.lis_person_name_given }} {{ attempt.student.lis_person_name_family }}'s </span>attempt beginning at {{ vm.utils.formatTimeWithTimeZone(attempt.created_at, vm.courseContext.time_zone) }}</span>
                </a>
            </td>
            <td class="qc-attempt-grade" ng-if="!vm.isStudent && !vm.largeClassSize">
                <span ng-if="attempt.firstRowForStudent">
                    <span ng-if="vm.gradesLoading">
                        <span class="fa fa-spin fa-circle-o-notch" aria-hidden="true"></span>
                        <span class="sr-only">Grades loading, please wait.</span>
                    </span>
                    <qc-grade ng-if="!vm.gradesLoading"
                        qc-attempt="attempt"
                        qc-points-possible="vm.pointsPossible"
                        qc-submissions="vm.submissions"
                        qc-users="vm.users"
                        qc-utils="vm.utils">
                    </qc-grade>
                </span>
            </td>
        </tr>
    </tbody>
</table>