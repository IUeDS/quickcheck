<div class="row">
    <div class="col-xs-12">
        <qc-loading ng-show="vm.utils.loading"></qc-loading>
        <qc-error-message ng-if="vm.utils.errorFound" qc-utils="vm.utils"></qc-error-message>
        <div ng-show="!vm.utils.loading" ng-cloak>
            <h1>Select a quick check</h1>
            <p>See the <a href="/documentation#embedding-assessments" target="_blank">embedding section in the documentation</a> for more information on embedding quick checks.</p>
            <div class="row">
                <div class="col-xs-10 qc-select-search">
                    <label for="assessment-search" class="sr-only">Search for quick checks</label>
                    <input type="text" class="form-control qc-search-box" id="assessment-search" ng-change="vm.updateSearch()" ng-model="vm.search.searchText" placeholder="Search">
                    <span role="button" class="qc-select-clear-search" ng-click="vm.clearSearch()">
                        <span class="fa fa-remove fa-lg" aria-hidden="true"></span>
                        <span class="sr-only">Clear search</span>
                    </span>
                </div>
            </div>
            <div ng-hide="vm.search.searchActivated" aria-live="polite">
                <h2>Sets</h2>
                <div ng-if="!vm.memberships.length && !vm.adminCollectionData.collections.length">
                    <h3>Woops!</h3>
                    <p class="lead">Looks like you haven't added any sets yet. You can add sets by clicking on the quick check tool in the course navigation.</p>
                </div>
                <div ng-if="vm.admin">
                    <qc-view-all-collections-toggle qc-collection-data="vm.adminCollectionData" qc-utils="vm.utils"></qc-view-all-collections-toggle>
                </div>
                <div class="panel-group" id="accordion-collections" role="tablist" aria-multiselectable="true">
                    <div ng-if="vm.adminCollectionData.viewAll">
                        <qc-collection-select-panel
                            ng-repeat="collection in vm.adminCollectionData.collections"
                            qc-collection="collection"
                            qc-launch-url-stem="vm.launchUrlStem"
                            qc-redirect-url="vm.redirectUrl">
                        </qc-collection-select-panel>
                    </div>
                    <div ng-if="!vm.adminCollectionData.viewAll">
                        <qc-collection-select-panel
                            ng-repeat="membership in vm.memberships"
                            qc-membership="membership"
                            qc-collection="membership.collection"
                            qc-launch-url-stem="vm.launchUrlStem"
                            qc-redirect-url="vm.redirectUrl">
                        </qc-collection-select-panel>
                    </div>
                </div>
            </div>
            <div ng-show="vm.search.searchActivated" aria-live="polite">
                <h2>Search results:</h2>
                <h3 ng-if="!vm.search.searchResults.length">No results found.</h3>
                <div class="row admin-assessment-row" ng-repeat="assessment in vm.search.searchResults">
                    <div class="col-xs-6 qc-select-row">
                        <h5 class="admin-assessment-name">
                            {{ assessment.name }}
                            <span ng-if="assessment.custom_activity_id" class="label label-info qc-label-custom">Custom</span>
                        </h5>
                    </div>
                    <div class="col-xs-6 qc-select-row">
                        <form class="row" method="POST" action="{{ vm.redirectUrl }}">
                            <!-- hidden form input for content item embed -->
                            <input type="hidden" name="lti_message_type" value="ContentItemSelection">
                            <input type="hidden" name="lti_version" value="LTI-1p0">
                            <input type="hidden" name="content_items" ng-value="vm.createContentItemJson(assessment)">

                            <!-- submit button to select embed -->
                            <button class="btn btn-success qc-btn qc-select-btn" type="submit">
                                <span class="fa fa-hand-pointer-o fa-lg" aria-hidden="true"></span> Select <span class="sr-only"> quick check {{ assessment.name }}</span>
                            </button>

                            <a ng-href="../assessment/{{assessment.id}}?preview=true" target="_blank" class="qc-view-btn qc-select-preview-btn">
                                <span ng-include="$root.iconViewPath" aria-hidden="true"></span>
                                <span class="sr-only">Preview quick check {{ assessment.name }}</span>
                            </a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>